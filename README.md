# Server-Fleet-Optimization

Problem Overview

This repository contains code for solving a server fleet management optimization problem. The challenge involves managing a fleet of servers across multiple datacenters over a set number of time steps. The goal is to maximize overall performance, which includes fulfilling demand, extending the lifespan of servers, and maximizing profit while minimizing costs such as energy consumption, server maintenance, and server movement between datacenters.

Key Problem Aspects:
Demand Fulfillment: Servers must meet the demand for different types of latency-sensitive services.
Lifecycle Management: Servers have a finite lifespan, and decisions must be made about when to purchase, move, or dismiss servers.
Cost Minimization: Costs include server purchases, energy consumption, maintenance, and server movement between datacenters.
Profit Maximization: Revenue is generated by fulfilling demand, and profit is calculated as revenue minus costs.
Current Approach: MILP with CPLEX Solver

The current approach uses Mixed-Integer Linear Programming (MILP) to model and solve the problem, leveraging the CPLEX solver to find optimal or near-optimal solutions.

Key Components:
Decision Variables:
Buy: Number of new servers to buy.
Move: Number of servers to move between datacenters.
Dismiss: Number of servers to dismiss from the fleet.
Server Count: The number of servers of each generation at each datacenter.
Demand Met: The amount of demand met for each server generation, datacenter, and latency sensitivity level.
Objective Function: The objective is to maximize a weighted combination of:
Demand Met: How well the fleet meets the service demand.
Server Age: Encouraging the use of older servers where feasible to minimize waste.
Profit: Revenue from meeting demand minus the costs of operating the servers.
The weights of these objectives can be tuned to prioritize different aspects of the problem (e.g., higher profit, longer server lifespan).
Constraints:
Data Center Capacity: Ensuring that the total number of servers at a datacenter does not exceed its capacity.
Demand Fulfillment: Ensuring that the servers deployed are capable of meeting the demand for various service types.
Server Count Dynamics: Accounting for changes in the fleet size due to buying, moving, or dismissing servers.
Lifecycle Management: Ensuring that servers are dismissed when they exceed their expected lifespan.
Purchase Window: Restricting server purchases to specific time windows based on their release schedule.
Utilization: Ensuring that the fleet can meet demand without over-provisioning.
Maintenance Costs:
A non-linear function is used to calculate the maintenance costs for servers as they age. This factor can lead to early dismissals if the maintenance costs become too high relative to the benefits provided by older servers.

Solver:
We use CPLEX as the optimization solver for solving the MILP model. CPLEX is well-suited for large-scale optimization problems and can handle the complexity of this fleet management task efficiently.

Previous Approaches

Before settling on the MILP-CPLEX approach, we explored other techniques:

1. Q-Learning:
Overview: Q-Learning is a reinforcement learning algorithm where an agent learns optimal policies through exploration and exploitation.
Application: We attempted to use Q-Learning to manage the server fleet by treating server actions (buy, move, dismiss) as actions in a reinforcement learning environment. The reward was tied to demand fulfillment and profit.
Challenges: Q-Learning struggled to handle the large state-action space due to the complex dynamics of the problem and required extensive exploration, leading to slow convergence.
2. CP-SAT (Constraint Programming with SAT Solver):
Overview: CP-SAT is a constraint programming solver that uses SAT (Boolean satisfiability) techniques to solve combinatorial optimization problems.
Application: We modeled the server fleet management problem as a constraint satisfaction problem, focusing on satisfying demand and minimizing costs.
Challenges: Although CP-SAT provided feasible solutions, it was difficult to scale the model to handle the full complexity of the problem, especially when balancing multiple objectives like server lifespan and profit.
Comparison:
Q-Learning: Provided a learning-based approach but struggled with the complexity and size of the problem.
CP-SAT: Offered a constraint satisfaction approach but had difficulties scaling and optimizing the problem efficiently.
MILP-CPLEX: This approach provided a better balance between performance and solution quality, handling the complexity of the problem more effectively.
How to Run the Project

Install Dependencies: Ensure that you have the required Python packages installed:
bash
Copiar código
pip install -r requirements.txt
CPLEX Setup: You need to have CPLEX installed on your system. If you don't have it, you can download the IBM ILOG CPLEX Optimization Studio from here.
Run the Optimization: To run the multi-time step optimization:
bash
Copiar código
python main.py
Review Results: The results will be saved as JSON files for each random seed used in the simulation. You can review these files to analyze the fleet performance over the entire time horizon.
Conclusion

This repository demonstrates the power of MILP, coupled with CPLEX, for solving complex optimization problems in server fleet management. By carefully balancing multiple objectives—demand fulfillment, server lifespan, and profit—this approach provides a robust solution to a challenging problem. However, the problem space is still open to further experimentation with different solvers and optimization techniques.

Feel free to contribute to this repository by suggesting improvements, exploring alternative optimization approaches, or tuning the current model to achieve better performance.

License:
This project is licensed under the MIT License - see the LICENSE file for details.